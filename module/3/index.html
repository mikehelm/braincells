<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BrainCells Module 3 ‚Äî Meet OpenClaw</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:ital,wght@0,400;0,500;0,600;0,700;0,800;1,400&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../../css/base.css">
  <link rel="stylesheet" href="../../css/components.css">
  <link rel="stylesheet" href="../../css/layout.css">
  <script src="../../js/theme.js"></script>
  <style>
    .module-content { max-width: none; margin: 0; padding: 0; }
    .module-body h1 { font-size: 2rem; margin-bottom: .5rem; }
    .module-body h2 { font-size: 1.5rem; margin: 2rem 0 .75rem; border-bottom: 2px solid #00C9A7; padding-bottom: .4rem; }
    .module-body h3 { font-size: 1.2rem; margin: 1.5rem 0 .5rem; color: #00C9A7; }
    .module-body p { line-height: 1.7; margin-bottom: 1rem; }
    .module-body ul, .module-body ol { margin: .5rem 0 1rem 1.5rem; line-height: 1.7; }
    .module-body li { margin-bottom: .35rem; }
    .module-body blockquote { border-left: 4px solid #00C9A7; margin: 1.5rem 0; padding: .75rem 1.25rem; background: var(--bg-subtle,#f0fdfb); border-radius: 0 8px 8px 0; }
    .module-body blockquote p { margin: 0; font-style: italic; }
    .module-body strong { color: inherit; }
    .module-body hr { border: none; border-top: 1px solid var(--border, #e5e7eb); margin: 2rem 0; }
    .module-body .code-block { background: var(--code-bg, #1e1e2e); color: #cdd6f4; padding: 1.25rem; border-radius: 8px; overflow-x: auto; margin: 1rem 0; }
    .module-body code { font-family: 'Fira Code', monospace; font-size: .9em; }
    .module-body p code { background: var(--bg-subtle, #f0f0f8); padding: .2em .4em; border-radius: 4px; }
    .module-meta { display: flex; gap: 1rem; flex-wrap: wrap; margin-bottom: 2rem; }
    .module-meta-badge { background: var(--bg-subtle,#f0fdfb); border: 1px solid var(--border, #e5e7eb); border-radius: 999px; padding: .35rem .9rem; font-size: .85rem; }
    .video-wrap { margin: 1.5rem 0; }
    .video-label { font-weight: 600; margin-bottom: .5rem; font-size: .9rem; opacity: .8; }
    .video-responsive { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: 10px; }
    .video-responsive iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
    .section-videos { margin: 2rem 0; padding: 1.5rem; background: var(--bg-subtle,#f0fdfb); border-radius: 12px; }
    .videos-heading { font-size: 1.1rem; margin-bottom: 1rem; }
    .drama-break { margin: 2.5rem 0; border: 2px solid #f59e0b; border-radius: 12px; overflow: hidden; }
    .drama-break__header { background: #f59e0b; padding: .75rem 1.25rem; display: flex; align-items: center; gap: .75rem; }
    .drama-break__icon { font-size: 1.4rem; }
    .drama-break__title { font-size: 1rem; font-weight: 700; color: #1c1917; margin: 0; }
    .drama-break__body { padding: 1.25rem; }
    .drama-break__body p { margin: 0; line-height: 1.7; }
    .quiz-section { margin: 3rem 0; background: var(--bg-subtle,#f0fdfb); border-radius: 16px; padding: 2rem; }
    .quiz-title { font-size: 1.5rem; margin-bottom: .5rem; }
    .quiz-subtitle { opacity: .7; margin-bottom: 2rem; }
    .quiz-card { margin-bottom: 2rem; padding-bottom: 1.5rem; border-bottom: 1px solid var(--border, #e5e7eb); }
    .quiz-q-text { font-size: 1rem; margin-bottom: .75rem; }
    .quiz-opts { display: flex; flex-direction: column; gap: .5rem; }
    .quiz-opt { display: flex; align-items: flex-start; gap: .65rem; padding: .65rem 1rem; border: 1px solid var(--border, #e5e7eb); border-radius: 8px; cursor: pointer; transition: background .15s; }
    .quiz-opt:hover { background: rgba(0,201,167,.07); }
    .quiz-opt input { margin-top: .2rem; flex-shrink: 0; }
    .quiz-opt.correct { background: #dcfce7; border-color: #16a34a; }
    .quiz-opt.wrong { background: #fee2e2; border-color: #dc2626; }
    .quiz-feedback { margin-top: .5rem; font-size: .9rem; font-weight: 600; }
    .quiz-feedback.correct { color: #16a34a; }
    .quiz-feedback.wrong { color: #dc2626; }
    .quiz-actions { margin-top: 1rem; }
    .quiz-result { margin-top: 1.5rem; padding: 1.25rem; border-radius: 10px; font-size: 1rem; }
    .quiz-result.great { background: #dcfce7; color: #14532d; }
    .quiz-result.ok { background: #fef3c7; color: #92400e; }
    .quiz-result.retry { background: #fee2e2; color: #7f1d1d; }
    .module-nav { display: flex; justify-content: space-between; align-items: center; margin: 2rem 0; padding: 1rem; background: var(--bg-subtle,#f0fdfb); border-radius: 10px; }
    .complete-btn-wrap { text-align: center; margin: 2rem 0; }
    @media (max-width: 600px) { .module-content { padding: 0; } .module-meta { gap: .5rem; } }
  </style>
</head>
<body>

<header class="site-header">
  <div class="header-inner">
    <a href="../../index.html" class="header-logo">ü¶û BrainCells</a>
    <nav class="header-nav">
      <a href="../../index.html" class="nav-link">Home</a>
      <a href="../../progress.html" class="nav-link">Progress</a>
      <a href="../../resources.html" class="nav-link">Resources</a>
      <a href="../../story.html" class="nav-link">The Story</a>
      <a href="../../about.html" class="nav-link">About</a>
    </nav>
    <div class="header-cells">
      <span class="cells-icon">üß†</span>
      <span class="cells-count" id="header-cells">0</span>
      <span class="cells-label">Brain Cells</span>
    </div>
    <button class="theme-toggle" id="theme-toggle" aria-label="Toggle dark mode">
      <span id="theme-icon">üåô</span>
    </button>
  </div>
</header>

<main>
  <div class="module-content">
    
    <div class="module-hero">
      <div class="module-hero-inner">
        <div class="module-hero-meta">
          <a href="../../index.html" class="module-hero-back">‚Üê Back to course</a>
          <span class="module-hero-progress">Module 3 of 8</span>
        </div>
        <h1 class="module-hero-title">Module 3: Meet OpenClaw</h1>
        <p class="module-hero-subtitle">The AI That Lives On YOUR Computer</p>
        <div class="module-hero-stats">
          <span>‚è± ~60 min</span>
          <span>üß† 200 Brain Cells</span>
          <span>üìù 5-question quiz</span>
        </div>
      </div>
    </div>
  <div class="lesson-layout">
      <aside class="lesson-toc" id="lesson-toc">
        <div class="toc-inner">
          <div class="toc-label">In this module</div>
          <nav id="toc-nav"></nav>
        </div>
      </aside>
      <article class="module-body" id="module-body">
  <section class="section-videos reveal">
    <h3 class="videos-heading">üé• Required Viewing</h3>
    
    <div class="video-wrap">
      <div class="video-label">OpenClaw in 3 Minutes</div>
      <div class="video-responsive">
        <iframe src="https://www.youtube.com/embed/vte-fDoZczE" 
                title="OpenClaw in 3 Minutes"
                frameborder="0" 
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                allowfullscreen></iframe>
      </div>
    </div>
  </section>      <h1>MODULE 3: Meet OpenClaw</h1>
<h2><em>The AI That Lives on YOUR Computer and Actually Does Stuff</em></h2>
<blockquote>
<p>üß† <strong>Brain Cells at stake:</strong> 200 base + up to 75 bonus (quiz)<br>‚è±Ô∏è <strong>Estimated time:</strong> ~60 minutes<br>üéØ <strong>Unlock:</strong> Requires Module 2 completion</p>
</blockquote>
<hr>
<h3>Learning Objectives</h3>
<p>By the end of this module, Graham will be able to:</p>
<ul>
<li><input disabled="" type="checkbox"> Explain what OpenClaw is to a non-technical colleague in under 2 minutes</li>
<li><input disabled="" type="checkbox"> Understand why &quot;self-hosted&quot; matters (and why Graham should care)</li>
<li><input disabled="" type="checkbox"> Compare OpenClaw to Zapier, n8n, and Make.com ‚Äî and explain why each is different</li>
<li><input disabled="" type="checkbox"> Know which messaging apps OpenClaw connects to</li>
<li><input disabled="" type="checkbox"> Get genuinely excited about sending a WhatsApp message and having his computer execute a task</li>
</ul>
<hr>
<h3>Key Concepts to Cover</h3>
<p><strong>1. The one-sentence explanation</strong></p>
<blockquote>
<p>&quot;OpenClaw is a program that runs on your computer 24/7, connects to your WhatsApp (or Telegram), and lets you chat with an AI assistant that can actually DO things ‚Äî browse websites, manage data, send reports, and run automations ‚Äî all from your phone.&quot;</p>
</blockquote>
<p><strong>2. Self-hosted = your data, your rules</strong></p>
<ul>
<li>When you use Zapier: your data flows through Zapier&#39;s servers (they can see it)</li>
<li>When you use OpenClaw: everything stays on YOUR machine</li>
<li>For marketing: client lists, lead data, campaign details ‚Äî all private</li>
<li>GDPR/privacy compliance: dramatically simpler when data never leaves your hardware</li>
</ul>
<p><strong>3. The messaging magic ‚Äî why this is different</strong></p>
<ul>
<li>You&#39;re not opening an app or a dashboard</li>
<li>You&#39;re sending a WhatsApp message: &quot;Hey, find the LinkedIn of everyone who signed up for our webinar last Tuesday&quot;</li>
<li>Your computer gets the message, does the work, messages you back: &quot;Found 23 contacts. 18 have LinkedIn. Here&#39;s the enriched list. ü¶û&quot;</li>
<li>This works from anywhere ‚Äî your phone, the beach, a client meeting</li>
</ul>
<p><strong>4. OpenClaw vs. the competition</strong></p>
<table>
<thead>
<tr>
<th>Tool</th>
<th>What it&#39;s like</th>
<th>The problem</th>
</tr>
</thead>
<tbody><tr>
<td>Zapier</td>
<td>A very smart traffic light</td>
<td>Only does what you told it. Can&#39;t think.</td>
</tr>
<tr>
<td>Make.com</td>
<td>A flowchart you built</td>
<td>Very manual to build; breaks when data changes</td>
</tr>
<tr>
<td>n8n</td>
<td>Zapier for developers</td>
<td>Great! But requires a developer</td>
</tr>
<tr>
<td>ChatGPT</td>
<td>A brilliant consultant</td>
<td>Brilliant but can&#39;t touch your systems or run on schedule</td>
</tr>
<tr>
<td><strong>OpenClaw</strong></td>
<td>A full-time AI employee</td>
<td>Lives on your computer, remembers context, takes action, you chat with it naturally</td>
</tr>
</tbody></table>
<p><strong>5. The channels OpenClaw supports</strong></p>
<ul>
<li>‚úÖ WhatsApp (most popular)</li>
<li>‚úÖ Telegram (fast, reliable, great for automation notifications)</li>
<li>‚úÖ Discord (great for teams)</li>
<li>‚úÖ iMessage (Mac only ‚Äî another reason to get that Mac Mini...)</li>
<li>‚úÖ Web dashboard (browser-based control panel at localhost:18789)</li>
</ul>
<p><strong>6. Who OpenClaw is built for</strong></p>
<ul>
<li>Power users who want a personal AI they control</li>
<li>People who handle sensitive business data</li>
<li>Marketing professionals who want automation without coding</li>
<li>Anyone who wants their AI to be a persistent partner, not just a chat window</li>
</ul>
<hr>
<h3>Suggested Videos for This Module</h3>
<ol>
<li>üé• <strong>&quot;AI Agents for Beginners&quot; (Microsoft)</strong> ‚Äî <a href="https://www.youtube.com/watch?v=OhI005_aJkA">https://www.youtube.com/watch?v=OhI005_aJkA</a> ‚Äî <em>First 2 lessons only (est. 30 min) ‚Äî builds agent intuition</em></li>
<li>üé• <strong>&quot;AI Web Scraping with No Code&quot;</strong> ‚Äî <a href="https://www.youtube.com/watch?v=vFXKZcvaAi0">https://www.youtube.com/watch?v=vFXKZcvaAi0</a> ‚Äî <em>Shows what the old way looks like vs. what OpenClaw does</em></li>
</ol>
<hr>
<h3>Quiz ‚Äî Module 3</h3>
<p><strong>Complete for up to 75 bonus Brain Cells (15 per correct answer)</strong></p>
<p><strong>Q1:</strong> What does &quot;self-hosted&quot; mean, and why does it matter for Graham&#39;s marketing business?<br>‚úÖ <strong>Answer:</strong> Self-hosted means the software runs on Graham&#39;s own machine, not a third-party server. This means client data stays private, never passes through another company&#39;s systems, and Graham maintains full control.</p>
<p><strong>Q2:</strong> How do you interact with OpenClaw after it&#39;s set up?<br>‚úÖ <strong>Answer:</strong> Via messaging apps (WhatsApp, Telegram, Discord, iMessage) ‚Äî send a message from your phone and OpenClaw does the task on your computer, then reports back.</p>
<p><strong>Q3:</strong> Name two ways OpenClaw is different from Zapier.<br>‚úÖ <strong>Answer (any two):</strong> OpenClaw is self-hosted (Zapier is cloud); OpenClaw uses AI to make decisions (Zapier uses rigid rules); OpenClaw remembers context across conversations; OpenClaw responds conversationally; OpenClaw can handle tasks that weren&#39;t pre-programmed.</p>
<p><strong>Q4:</strong> True or False: OpenClaw requires you to be at your computer to use it.<br>‚úÖ <strong>Answer:</strong> FALSE ‚Äî you send messages from your phone (WhatsApp/Telegram) and OpenClaw works on your computer autonomously.</p>
<p><strong>Q5:</strong> Which of these can OpenClaw NOT do?<br>A) Browse websites<br>B) Read your emails<br>C) Make your coffee<br>D) Send you Telegram messages<br>‚úÖ <strong>Answer:</strong> C ‚Äî OpenClaw cannot yet operate physical hardware (coffee machines, thermostat control, etc.). Give it time.  </p>
<blockquote>
<p><em>Graham gets bonus Brain Cells if he said &quot;yet&quot; after answering C.</em></p>
</blockquote>
<hr>
<h3>üîì Unlock Criteria for Module 4</h3>
<ul>
<li>Complete quiz with 3/5 correct</li>
<li><strong>Achievement Unlock:</strong> &quot;OpenClaw Curious&quot; ü¶û (+20 bonus Brain Cells)</li>
</ul>
<hr>
<h3>Humor Notes for Module 3</h3>
<ul>
<li>The WhatsApp-from-the-beach scenario is compelling and should be vivid</li>
<li>Emphasize: Graham doesn&#39;t need to understand HOW it works, just that it does</li>
<li>The comparison table is gold ‚Äî make it slightly snarky about competitors</li>
<li>iMessage unlock is a subtle seed for the Mac Mini recommendation in Module 5</li>
</ul>
<hr>
<hr>

  <div class="drama-break reveal">
    <div class="drama-break__header">
      <span class="drama-break__icon">üé≠</span>
      <h3 class="drama-break__title">üé≠ Drama Break: The OpenAI Deal That Divided the Community</h3>
    </div>
    <div class="drama-break__body">
      <p>Just as OpenClaw was going viral, OpenAI came knocking. Peter announced that OpenAI would begin sponsoring OpenClaw ‚Äî and the community split in two.

<strong>üéâ Team Resources:</strong> "OpenAI money = faster development, better infrastructure, Peter can work on it full-time. Win."<br>
<strong>üò§ Team Independence:</strong> "OpenAI sponsors the project that runs Claude? Conflict of interest. Will it start favoring GPT models?"

<strong>Fortune</strong> covered Peter. <strong>Sam Altman</strong> and <strong>Mark Zuckerberg</strong> both noticed. The project went from indie experiment to tech industry conversation piece in weeks.</p>
    </div>
  </div>

    
  <section class="quiz-section reveal" id="quiz">
    <h2 class="quiz-title">üß† Module 3 Quiz</h2>
    <p class="quiz-subtitle">Answer all 5 questions to earn your Brain Cells. Perfect score = Neuron Boost!</p>
    <div class="quiz-cards">
      
    <div class="quiz-card" data-q="0">
      <div class="quiz-q-num">Q1.</div>
      <p class="quiz-q-text">Where does OpenClaw run?</p>
      <div class="quiz-opts">
        
          <label class="quiz-opt" data-correct="true">
            <input type="radio" name="q3_0" value="0"> On YOUR computer ‚Äî local, private, yours
          </label>
          <label class="quiz-opt" data-correct="false">
            <input type="radio" name="q3_0" value="1"> On a cloud server somewhere
          </label>
          <label class="quiz-opt" data-correct="false">
            <input type="radio" name="q3_0" value="2"> On OpenAI's servers
          </label>
          <label class="quiz-opt" data-correct="false">
            <input type="radio" name="q3_0" value="3"> On Graham's phone
          </label>
      </div>
      <div class="quiz-feedback" style="display:none"></div>
    </div>
    <div class="quiz-card" data-q="1">
      <div class="quiz-q-num">Q2.</div>
      <p class="quiz-q-text">What is a "channel" in OpenClaw?</p>
      <div class="quiz-opts">
        
          <label class="quiz-opt" data-correct="false">
            <input type="radio" name="q3_1" value="0"> A TV channel
          </label>
          <label class="quiz-opt" data-correct="true">
            <input type="radio" name="q3_1" value="1"> How you communicate with your agent (Telegram, WhatsApp, etc.)
          </label>
          <label class="quiz-opt" data-correct="false">
            <input type="radio" name="q3_1" value="2"> A payment method
          </label>
          <label class="quiz-opt" data-correct="false">
            <input type="radio" name="q3_1" value="3"> A type of file
          </label>
      </div>
      <div class="quiz-feedback" style="display:none"></div>
    </div>
    <div class="quiz-card" data-q="2">
      <div class="quiz-q-num">Q3.</div>
      <p class="quiz-q-text">Who built OpenClaw and why?</p>
      <div class="quiz-opts">
        
          <label class="quiz-opt" data-correct="false">
            <input type="radio" name="q3_2" value="0"> Google, to compete with OpenAI
          </label>
          <label class="quiz-opt" data-correct="false">
            <input type="radio" name="q3_2" value="1"> Microsoft, for enterprise customers
          </label>
          <label class="quiz-opt" data-correct="false">
            <input type="radio" name="q3_2" value="2"> Anthropic, to use Claude
          </label>
          <label class="quiz-opt" data-correct="true">
            <input type="radio" name="q3_2" value="3"> Peter Steinberger, because he was annoyed it didn't exist
          </label>
      </div>
      <div class="quiz-feedback" style="display:none"></div>
    </div>
    <div class="quiz-card" data-q="3">
      <div class="quiz-q-num">Q4.</div>
      <p class="quiz-q-text">What makes OpenClaw different from using ChatGPT directly?</p>
      <div class="quiz-opts">
        
          <label class="quiz-opt" data-correct="false">
            <input type="radio" name="q3_3" value="0"> It's cheaper
          </label>
          <label class="quiz-opt" data-correct="false">
            <input type="radio" name="q3_3" value="1"> It has a better UI
          </label>
          <label class="quiz-opt" data-correct="true">
            <input type="radio" name="q3_3" value="2"> It runs on your machine, has persistent memory, and can use tools/automations
          </label>
          <label class="quiz-opt" data-correct="false">
            <input type="radio" name="q3_3" value="3"> It's made by a bigger company
          </label>
      </div>
      <div class="quiz-feedback" style="display:none"></div>
    </div>
    <div class="quiz-card" data-q="4">
      <div class="quiz-q-num">Q5.</div>
      <p class="quiz-q-text">What happened when OpenClaw launched on GitHub?</p>
      <div class="quiz-opts">
        
          <label class="quiz-opt" data-correct="false">
            <input type="radio" name="q3_4" value="0"> Nothing notable
          </label>
          <label class="quiz-opt" data-correct="true">
            <input type="radio" name="q3_4" value="1"> It became one of the fastest-growing repositories in GitHub history
          </label>
          <label class="quiz-opt" data-correct="false">
            <input type="radio" name="q3_4" value="2"> It was taken down
          </label>
          <label class="quiz-opt" data-correct="false">
            <input type="radio" name="q3_4" value="3"> It was bought by Microsoft
          </label>
      </div>
      <div class="quiz-feedback" style="display:none"></div>
    </div>
    </div>
    <div class="quiz-actions">
      <button class="btn btn-primary" id="quiz-submit-3" onclick="submitQuiz(3, 75)">
        Submit Answers üß†
      </button>
    </div>
    <div class="quiz-result" id="quiz-result-3" style="display:none"></div>
  </section>

    <div class="complete-btn-wrap reveal">
      <button class="btn btn-primary btn-lg" id="complete-btn-3" onclick="completeModule(3, 200)">
        ‚úÖ Mark Module 3 Complete (+200 üß†)
      </button>
    </div>

    <div class="module-nav reveal"><a href="../2/index.html" class="btn btn-outline">‚Üê Module 2</a> <span style="opacity:.5;font-size:.9rem;">Module 3 of 8</span> <a href="../4/index.html" class="btn btn-outline">Module 4 ‚Üí</a></div>

    </article>
  </div>
  </div>
</main>

<footer class="site-footer">
  <div class="footer-inner">
    <div class="footer-logo">ü¶û BrainCells</div>
    <p class="footer-tagline">A course built for Graham Brain by Mike Helm (with significant assistance from Otto, the AI)</p>
    <p class="footer-copy">Made with ü¶û and an embarrassing number of Brain Cell puns.</p>
  </div>
</footer>

<script src="../../js/state.js"></script>
<script src="../../js/achievements.js"></script>
<script src="../../js/unlock.js"></script>
<script>
  (function() {
    const bar = document.createElement('div');
    bar.className = 'reading-progress-bar';
    document.body.prepend(bar);
    window.addEventListener('scroll', () => {
      const docH = document.documentElement.scrollHeight - window.innerHeight;
      bar.style.width = docH > 0 ? (window.scrollY / docH * 100) + '%' : '0%';
    }, { passive: true });
  })();

  // Update header cells on load
  (function() {
    const state = window.BrainState ? window.BrainState.load() : { brainCells: 0 };
    const el = document.getElementById('header-cells');
    if (el) el.textContent = state.brainCells || 0;
    
    // Check if already completed
    const modState = state.modules && state.modules[3];
    if (modState && modState.completedAt) {
      const btn = document.getElementById('complete-btn-3');
      if (btn) { btn.textContent = '‚úÖ Module 3 Complete!'; btn.disabled = true; btn.style.opacity = '.6'; }
    }
  })();

  function completeModule(num, cells) {
    if (!window.BrainState) return;
    const result = BrainState.completeModule(num, cells);
    if (!result) { alert('Already completed!'); return; }

    launchConfetti();
    
    const btn = document.getElementById('complete-btn-' + num);
    if (btn) { btn.textContent = 'üéâ Completed! +' + cells + ' Brain Cells!'; btn.disabled = true; btn.style.opacity = '.6'; }
    
    // Update header
    const state = BrainState.load();
    const el = document.getElementById('header-cells');
    if (el) el.textContent = state.brainCells;
    
    if (window.Achievements) Achievements.check(state);
    if (window.Unlock) Unlock.check(num, state);
    
    setTimeout(() => {
      if (confirm('Module 3 complete! üß† You earned ' + cells + ' Brain Cells!\n\nHead to the next module?')) {
        window.location.href = '../4/index.html';
      }
    }, 300);
  }

  (function() {
    document.querySelectorAll('.quiz-opt input[type="radio"]').forEach(input => {
      input.addEventListener('change', () => {
        const card = input.closest('.quiz-card');
        if (!card) return;
        card.querySelectorAll('.quiz-opt').forEach(opt => opt.classList.remove('selected'));
        const selectedOpt = input.closest('.quiz-opt');
        if (selectedOpt) selectedOpt.classList.add('selected');
      });
    });

    document.querySelectorAll('.module-body h2, .module-body h3, .module-body blockquote, .module-body .callout, .module-body .key-takeaway, .module-body ul, .module-body ol').forEach(el => {
      el.classList.add('reveal');
    });

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(e => {
        if (e.isIntersecting) {
          e.target.classList.add('visible');
          observer.unobserve(e.target);
        }
      });
    }, { threshold: 0.1 });

    document.querySelectorAll('.reveal').forEach(el => observer.observe(el));
  })();

  (function() {
    const nav = document.getElementById('toc-nav');
    if (!nav) return;

    const headings = document.querySelectorAll('.module-body h2, .module-body h3');
    headings.forEach((h, i) => {
      if (!h.id) h.id = 'section-' + i;
      const a = document.createElement('a');
      a.href = '#' + h.id;
      a.textContent = h.textContent;
      a.className = h.tagName === 'H3' ? 'toc-h3' : '';
      a.onclick = e => {
        e.preventDefault();
        h.scrollIntoView({ behavior: 'smooth', block: 'start' });
      };
      nav.appendChild(a);
    });

    const io = new IntersectionObserver(entries => {
      entries.forEach(e => {
        const id = e.target.id;
        const link = nav.querySelector('[href="#' + id + '"]');
        if (link) link.classList.toggle('active', e.isIntersecting);
      });
    }, { rootMargin: '-10% 0px -80% 0px' });

    headings.forEach(h => io.observe(h));
  })();

  function launchConfetti() {
    const canvas = document.createElement('canvas');
    canvas.style.cssText = 'position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:10000';
    document.body.appendChild(canvas);
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    const pieces = Array.from({ length: 120 }, () => ({
      x: Math.random() * canvas.width,
      y: -20,
      vx: (Math.random() - 0.5) * 6,
      vy: Math.random() * 5 + 3,
      r: Math.random() * 6 + 3,
      color: ['#00C9A7', '#F5A623', '#00C9A7', '#ec4899', '#22c55e'][Math.floor(Math.random() * 5)],
      rot: Math.random() * 360,
      drot: (Math.random() - 0.5) * 8
    }));

    let frame = 0;
    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      pieces.forEach(p => {
        ctx.save();
        ctx.translate(p.x, p.y);
        ctx.rotate(p.rot * Math.PI / 180);
        ctx.fillStyle = p.color;
        ctx.fillRect(-p.r / 2, -p.r / 2, p.r, p.r / 1.5);
        ctx.restore();
        p.x += p.vx;
        p.y += p.vy;
        p.vy += 0.12;
        p.rot += p.drot;
      });
      if (++frame < 180) requestAnimationFrame(draw);
      else canvas.remove();
    }
    draw();
  }
  function submitQuiz(num, maxCells) {
    const questions = document.querySelectorAll('.quiz-card');
    let correct = 0;
    let answered = 0;
    
    questions.forEach((qEl, i) => {
      const opts = qEl.querySelectorAll('.quiz-opt');
      const selected = qEl.querySelector('input:checked');
      if (!selected) return;
      answered++;
      
      const isCorrect = selected.closest('.quiz-opt').dataset.correct === 'true';
      const feedback = qEl.querySelector('.quiz-feedback');
      
      opts.forEach(opt => {
        if (opt.dataset.correct === 'true') opt.classList.add('correct');
        else if (opt.querySelector('input:checked')) opt.classList.add('wrong');
        opt.querySelector('input').disabled = true;
      });
      
      if (feedback) {
        feedback.style.display = 'block';
        feedback.className = 'quiz-feedback ' + (isCorrect ? 'correct' : 'wrong');
        feedback.textContent = isCorrect ? '‚úÖ Correct!' : '‚ùå Not quite ‚Äî the correct answer is highlighted above.';
      }
      if (isCorrect) correct++;
    });
    
    if (answered < questions.length) { alert('Please answer all questions first!'); return; }
    
    const btn = document.getElementById('quiz-submit-' + num);
    if (btn) btn.style.display = 'none';
    
    const earned = Math.round((correct / questions.length) * maxCells);
    const bonus = correct === questions.length ? Math.round(maxCells * 0.5) : 0;
    const total = earned + bonus;
    
    const resultEl = document.getElementById('quiz-result-' + num);
    let cls = correct >= 4 ? 'great' : (correct >= 2 ? 'ok' : 'retry');
    let msg = '';
    if (correct === 5) msg = 'üèÜ Perfect score! Neuron Boost activated ‚Äî bonus Brain Cells earned! +' + total + ' üß†';
    else if (correct >= 3) msg = '‚úÖ Good work! ' + correct + '/5 correct. You earned ' + total + ' Brain Cells. üß†';
    else msg = 'üìö ' + correct + '/5 correct. Review the material and try again for more Brain Cells.';
    
    if (resultEl) {
      resultEl.className = 'quiz-result ' + cls;
      resultEl.innerHTML = '<strong>' + msg + '</strong>';
      resultEl.style.display = 'block';
    }
    
    if (window.BrainState && total > 0) {
      BrainState.addCells(total, 'quiz_module_' + num);
      const state = BrainState.load();
      const el = document.getElementById('header-cells');
      if (el) el.textContent = state.brainCells;
    }
  }
</script>
</body>
</html>
